webpackJsonp([12],{B16S:function(t,e){},sR4F:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),n=s("exGp"),r=s.n(n),o=s("mrNh"),l=s("eOoE"),c={name:"course",components:{talkCmp:s("wNu5").a},data:function(){return{tishi:"",status:0,loading:!1,id:"",items:"",craftCardInfoDTOList:[],workMessageInfoDTOList:[],totalsi:0,itemsbm:[],itemsxs:[],talktext:"",timer:"",filevalue:"",filevalue2:"",downurls:"",startId:0,startId2:0,workMessageInfoDTOList2:[],totalsi2:0,teachingid:"",partNumber:"",partName:"",productType:"",materials:"",workblankWeight:"",workblankKind:"",biaolist:[],jichuanglist:[{id:1,name:"车床"},{id:2,name:"铣床"},{id:3,name:"刨床"},{id:4,name:"磨床"},{id:5,name:"钻床"},{id:6,name:"铰床"}],messageload:!1,messageload2:!1}},mounted:function(){this.downurls=l.a;var t=this.$route.params.id;this.id=t,this.Getworkinfobyid(),this.Studentlistmessage(1),this.Getstudentcardbyworkid(),this.message()},methods:{closetrue:function(t){this.craftCardInfoDTOList[t].close=!1},closefalse:function(t){this.craftCardInfoDTOList[t].close=!0},message:function(){var t=this;setInterval(function(){t.messageupdate2(),t.messageupdate()},5e3)},messageupdate2:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=0==t.workMessageInfoDTOList2.length?0:t.workMessageInfoDTOList2[t.workMessageInfoDTOList2.length-1].id,e.prev=1,e.next=4,Object(o._17)(s,t.teachingid);case 4:0==(a=e.sent).status.code&&(t.workMessageInfoDTOList2=t.workMessageInfoDTOList2.concat(a.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}},e,t,[[1,8,11,13]])}))()},messageupdate:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=0==t.workMessageInfoDTOList.length?0:t.workMessageInfoDTOList[t.workMessageInfoDTOList.length-1].id,e.prev=1,e.next=4,Object(o._16)(s,t.id);case 4:0==(a=e.sent).status.code&&(t.workMessageInfoDTOList=t.workMessageInfoDTOList.concat(a.result)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,e.finish(11);case 13:case"end":return e.stop()}},e,t,[[1,8,11,13]])}))()},Addmessagebystudent2:function(t){var e=this;return r()(i.a.mark(function s(){var a,n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=e.teachingid,t){s.next=4;break}return e.$message({showClose:!0,message:"讨论内容不能为空",type:"error"}),s.abrupt("return");case 4:return e.loading=!0,s.prev=6,s.next=9,Object(o.k)(a,t);case 9:0==(n=s.sent).status.code?(e.$message({showClose:!0,message:"发表成功",type:"success"}),e.talktext="",e.Studentlistmessage2(1)):e.$message.error(n.status.description),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,e.loading=!1,s.finish(16);case 19:case"end":return s.stop()}},s,e,[[6,13,16,19]])}))()},getmore2:function(t){this.Studentlistmessage2(t)},Studentlistmessage2:function(t){var e=this;return r()(i.a.mark(function s(){var a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return 10,1==t&&(e.workMessageInfoDTOList2=[],e.startId=0,5),s.prev=3,s.next=6,Object(o._15)(e.items.teaching.id,t,5,e.startId2);case 6:0==(a=s.sent).status.code?(e.totalsi2=a.result.teachingMessageInfoDTOBaseListDTO.total,e.workMessageInfoDTOList2=a.result.teachingMessageInfoDTOBaseListDTO.list.reverse().concat(e.workMessageInfoDTOList2)):e.$message.error(a.status.description),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(3),console.log(s.t0);case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}},s,e,[[3,10,13,15]])}))()},deletemessage2:function(t){var e=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){e.Deletestudentmessage2(t.id,t.index)}).catch(function(){})},Deletestudentmessage2:function(t,e){var s=this;return r()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.loading=!0,a.prev=1,a.next=4,Object(o._36)(t);case 4:0==(n=a.sent).status.code?(s.$message({showClose:!0,message:"删除成功",type:"success"}),s.workMessageInfoDTOList2.splice(e,1)):s.$message.error(n.status.description),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,s.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,s,[[1,8,11,14]])}))()},delworkFileDTO:function(t,e){var s=this;this.$confirm("确定要删除作业附件吗？","提示",{type:"warning"}).then(function(){s.Deletewrokfile(t,e)}).catch(function(){})},Deletewrokfile:function(t,e){var s=this;return r()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.loading=!0,a.prev=1,a.next=4,Object(o.E)(t);case 4:0==(n=a.sent).status.code?(s.$message({showClose:!0,message:"删除成功",type:"success"}),s.items.workFileDTOList.splice(e,1)):s.$message.error(n.status.description),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,s.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,s,[[1,8,11,14]])}))()},add_img2:function(t){var e=this;return r()(i.a.mark(function s(){var a,n,r,o;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),new FileReader,n=t.target.files[0],(r=new FormData).append("file",n,n.name),r.append("workId",e.id),s.prev=6,s.next=9,Object(l.d)("/processfile/addworkfile/",r);case 9:0==(o=s.sent).status.code?(e.pageNum=1,e.$message({message:"上传成功",type:"success"}),e.craftCardInfoDTOList[t.target.dataset.index].processFileId=o.result.id,e.craftCardInfoDTOList[t.target.dataset.index].processFile.path=o.result.path):e.$message.error(o.status.description),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,a.close(),e.filevalue2="",s.finish(16);case 20:case"end":return s.stop()}},s,e,[[6,13,16,20]])}))()},add_img:function(t){var e=this;return r()(i.a.mark(function s(){var a,n,r,o;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return a=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),new FileReader,n=t.target.files[0],(r=new FormData).append("file",n,n.name),r.append("workId",e.id),s.prev=6,s.next=9,Object(l.d)("/workfile/addworkfile/",r);case 9:0==(o=s.sent).status.code?(e.pageNum=1,e.$message({message:"上传成功",type:"success"}),e.Getworkinfobyid()):e.$message.error(o.status.description),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,a.close(),e.filevalue="",s.finish(16);case 20:case"end":return s.stop()}},s,e,[[6,13,16,20]])}))()},timers:function(){var t=this;this.timer=setInterval(function(){t.savework(2)},1e4)},addafter:function(t){this.craftCardInfoDTOList.splice(t+1,0,{processId:"",surfaceId:1,close:!0,processFileId:"",processFile:{name:"",path:"",size:""},name:"",sort:"",workingPositionList:[{workingPositionId:"",sort:"",workingStepList:[{workingStepId:"",tool:1,cutter:"",cutDepth:"",mainshaftSpeed:"",fixture:"",feedingDepth:"",load:"",cutSpeed:"",basicTime:"",assistTime:"",workspaceServiceTime:"",sort:""}]}]})},delcarts:function(t){this.craftCardInfoDTOList.splice(t,1)},removefront:function(t){var e=this.craftCardInfoDTOList[t];this.craftCardInfoDTOList.splice(t,1),this.craftCardInfoDTOList.splice(t-1,0,e)},removeafter:function(t){var e=this.craftCardInfoDTOList[t];this.craftCardInfoDTOList.splice(t,1),this.craftCardInfoDTOList.splice(t+1,0,e)},addafter1:function(t,e){this.craftCardInfoDTOList[t].workingPositionList.splice(e+1,0,{workingPositionId:"",sort:"",workingStepList:[{workingStepId:"",tool:1,cutter:"",cutDepth:"",mainshaftSpeed:"",fixture:"",feedingDepth:"",load:"",cutSpeed:"",basicTime:"",assistTime:"",workspaceServiceTime:"",sort:""}]})},delcarts1:function(t,e){this.craftCardInfoDTOList[t].workingPositionList.splice(e,1)},removefront1:function(t,e){var s=this.craftCardInfoDTOList[t].workingPositionList[e];this.craftCardInfoDTOList[t].workingPositionList.splice(e,1),this.craftCardInfoDTOList[t].workingPositionList.splice(e-1,0,s)},removeafter1:function(t,e){var s=this.craftCardInfoDTOList[t].workingPositionList[e];this.craftCardInfoDTOList[t].workingPositionList.splice(e,1),this.craftCardInfoDTOList[t].workingPositionList.splice(e+1,0,s)},addafter2:function(t,e,s){this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s+1,0,{workingStepId:"",tool:1,cutter:"",cutDepth:"",mainshaftSpeed:"",fixture:"",feedingDepth:"",load:"",cutSpeed:"",basicTime:"",assistTime:"",workspaceServiceTime:"",sort:""})},delcarts2:function(t,e,s){this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s,1)},removefront2:function(t,e,s){var a=this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList[s];this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s,1),this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s-1,0,a)},removeafter2:function(t,e,s){var a=this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList[s];this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s,1),this.craftCardInfoDTOList[t].workingPositionList[e].workingStepList.splice(s+1,0,a)},viewwork:function(){this.$router.push({path:"workdetail"})},submitwork:function(){var t=this;this.$confirm("确定提交？提交完成不能修改","提示",{type:"warning"}).then(function(){t.savework(1)}).catch(function(){})},deletemessage:function(t){var e=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){e.Deletestudentmessage(t.id,t.index)}).catch(function(){})},Deletestudentmessage:function(t,e){var s=this;return r()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.loading=!0,a.prev=1,a.next=4,Object(o.A)(t);case 4:0==(n=a.sent).status.code?(s.$message({showClose:!0,message:"删除成功",type:"success"}),s.workMessageInfoDTOList.splice(e,1)):s.$message.error(n.status.description),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,s.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,s,[[1,8,11,14]])}))()},Submits:function(){var t=this;return r()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,Object(o._20)(t.id);case 4:0==(s=e.sent).status.code?(t.$message({showClose:!0,message:"作业提交成功",type:"success"}),clearInterval(t.timer),t.Getworkinfobyid()):t.$message.error(s.status.description),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,t.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,t,[[1,8,11,14]])}))()},savework:function(t){var e=this;return r()(i.a.mark(function s(){var a,n,r,l,c,p,d,u,m,f,v,g,h;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(a=e.craftCardInfoDTOList,n=e.partNumber,r=e.partName,l=e.productType,c=e.materials,p=e.workblankWeight,d=e.workblankKind,u=e.id,m=0;m<a.length;m++)for(a[m].sort=m+1,f=0;f<a[m].workingPositionList.length;f++)for(a[m].workingPositionList[f].sort=f+1,v=0;v<a[m].workingPositionList[f].workingStepList.length;v++)a[m].workingPositionList[f].workingStepList[v].sort=v+1;return 2!=t?e.loading=!0:e.tishi="正在自动保存...",g=e,s.prev=4,s.next=7,Object(o.c)(u,n,r,l,c,p,d,a);case 7:0==(h=s.sent).status.code?(1==t?e.Submits():0==t?e.$message({showClose:!0,message:"作业保存成功",type:"success"}):(setTimeout(function(){g.tishi="保存成功"},1500),setTimeout(function(){g.tishi=""},2500)),e.Getstudentcardbyworkid()):e.$message.error(h.status.description),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(4),console.log(s.t0);case 14:return s.prev=14,e.loading=!1,s.finish(14);case 17:case"end":return s.stop()}},s,e,[[4,11,14,17]])}))()},Getworkinfobyid:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,s=t.id,e.prev=2,e.next=5,Object(o.T)(s);case 5:0==(a=e.sent).status.code?(t.items=a.result,t.teachingid=a.result.teaching.id,t.Studentlistmessage2(1),t.status=a.result.status,0!=a.result.status&&2!=a.result.status||t.timers(),t.Finishedsurface()):t.$message.error(a.status.description),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.prev=12,t.loading=!1,e.finish(12);case 15:case"end":return e.stop()}},e,t,[[2,9,12,15]])}))()},Getstudentcardbyworkid:function(){var t=this;return r()(i.a.mark(function e(){var s,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.R)(t.id);case 3:0==(s=e.sent).status.code?s.result?((a=s.result.processList).forEach(function(t,e){t.close=!1,t.processFile||(t.processFile={name:"",path:"",size:""})}),t.craftCardInfoDTOList=a,t.partNumber=s.result.partNumber,t.partName=s.result.partName,t.productType=s.result.productType,t.materials=s.result.materials,t.workblankWeight=s.result.workblankWeight,t.workblankKind=s.result.workblankKind):t.craftCardInfoDTOList=[{processId:"",surfaceId:1,close:!0,processFileId:"",processFile:{name:"",path:"",size:""},name:"",sort:"",workingPositionList:[{workingPositionId:"",sort:"",workingStepList:[{workingStepId:"",tool:1,cutter:"",cutDepth:"",mainshaftSpeed:"",fixture:"",feedingDepth:"",load:"",cutSpeed:"",basicTime:"",assistTime:"",workspaceServiceTime:"",sort:""}]}]}]:t.$message.error(s.status.description),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,t.loading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,t,[[0,7,10,13]])}))()},Addmessagebystudent:function(t){var e=this;return r()(i.a.mark(function s(){var a,n;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=e.id,t){s.next=4;break}return e.$message({showClose:!0,message:"讨论内容不能为空",type:"error"}),s.abrupt("return");case 4:return e.loading=!0,s.prev=6,s.next=9,Object(o.g)(a,t);case 9:0==(n=s.sent).status.code?(e.$message({showClose:!0,message:"发表成功",type:"success"}),e.talktext="",e.Studentlistmessage(1)):e.$message.error(n.status.description),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,e.loading=!1,s.finish(16);case 19:case"end":return s.stop()}},s,e,[[6,13,16,19]])}))()},getmore:function(t){this.Studentlistmessage(t)},Studentlistmessage:function(t){var e=this;return r()(i.a.mark(function s(){var a;return i.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return 10,1==t&&(e.workMessageInfoDTOList=[],e.startId=0,5),s.prev=3,s.next=6,Object(o._18)(e.id,t,5,e.startId);case 6:0==(a=s.sent).status.code?(e.totalsi=a.result.total,e.workMessageInfoDTOList=a.result.list.reverse().concat(e.workMessageInfoDTOList)):e.$message.error(a.status.description),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(3),console.log(s.t0);case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}},s,e,[[3,10,13,15]])}))()},Finishedsurface:function(){var t=this;return r()(i.a.mark(function e(){var s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(o.F)(t.items.workProjectInfoDTO.id);case 3:0==(s=e.sent).status.code?t.biaolist=s.result.list:t.$message.error(s.status.description),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,e.finish(10);case 12:case"end":return e.stop()}},e,t,[[0,7,10,12]])}))()}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tstuwork"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-c-scale-to-original"}),t._v(" 课程设计\n            ")]),t._v(" "),t.items?s("el-breadcrumb-item",[t._v(t._s(t.items.teaching.name))]):t._e()],1)],1),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container"},[s("div",{staticClass:"form"},[t.items?s("h3",[t._v(t._s(t.items.teaching.name))]):t._e(),t._v(" "),t.items?s("el-form",{ref:"form",attrs:{"label-width":"90px"}},[s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"指导老师："}},[t._v("\n                    "+t._s(t.items.teaching.teacherName)+"\n                ")]),t._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"学生："}},[t._v("\n                    "+t._s(t.items.studentName)+"\n                ")]),t._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"作业项目："}},[t._v("\n                    "+t._s(t.items.workProjectInfoDTO.name)+"\n                ")]),t._v(" "),s("el-form-item",{attrs:{label:"项目简介："}},[s("div",{staticClass:"teacherishi"},[t._v(t._s(t.items.workProjectInfoDTO.desc))])]),t._v(" "),s("el-form-item",{attrs:{label:"相关资料："}},[t._l(t.items.workProjectInfoDTO.filelist,function(e){return[s("a",{staticClass:"download-bg",attrs:{target:"_blank",download:e.name||"图片",href:t.downurls+e.url}},[s("el-button",{staticClass:"download",attrs:{type:"text"}},[t._v(t._s(e.name))]),t._v(" "),s("i",{staticClass:"el-icon-download"})],1),s("br")]})],2),t._v(" "),0==t.status||2==t.status?s("el-form-item",{attrs:{label:"工艺卡片："}},[s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.partNumber,callback:function(e){t.partNumber=e},expression:"partNumber"}},[s("template",{slot:"prepend"},[t._v("零件号")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.materials,callback:function(e){t.materials=e},expression:"materials"}},[s("template",{slot:"prepend"},[t._v("材料")])],2)],1),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.partName,callback:function(e){t.partName=e},expression:"partName"}},[s("template",{slot:"prepend"},[t._v("零件名称")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.workblankWeight,callback:function(e){t.workblankWeight=e},expression:"workblankWeight"}},[s("template",{slot:"prepend"},[t._v("毛坯重量")])],2)],1),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}},[s("template",{slot:"prepend"},[t._v("生产类型")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:t.workblankKind,callback:function(e){t.workblankKind=e},expression:"workblankKind"}},[s("template",{slot:"prepend"},[t._v("毛坯种类")])],2)],1),t._v(" "),t._l(t.craftCardInfoDTOList,function(e,a){return s("el-form",{key:a,ref:"form",refInFor:!0,class:{"form-in":!0,overflow:e.close},attrs:{"label-width":"85px"}},[s("h4",[e.close?s("i",{staticClass:"iconstyle el-icon-plus",on:{click:function(e){return t.closetrue(a)}}}):t._e(),e.close?t._e():s("i",{staticClass:"iconstyle el-icon-minus",on:{click:function(e){return t.closefalse(a)}}}),s("span",{staticStyle:{color:"#000","font-size":"16px"}},[t._v("工序 "+t._s(a+1)+" ")]),t._v(" "),s("el-button",{staticClass:"del-button caobutton",attrs:{disabled:t.craftCardInfoDTOList.length<2,size:"mini",type:"danger",plain:""},on:{click:function(e){return t.delcarts(a)}}},[t._v("删除卡片")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.addafter(a)}}},[t._v(" 后方插入 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{disabled:a+1==t.craftCardInfoDTOList.length,type:"primary",size:"mini",plain:""},on:{click:function(e){return t.removeafter(a)}}},[t._v(" 向后移动 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",disabled:0==a,size:"mini",plain:""},on:{click:function(e){return t.removefront(a)}}},[t._v(" 向前移动 ")])],1),t._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"工序名称："}},[s("el-input",{staticClass:"margin10",staticStyle:{width:"193px"},attrs:{size:"mini",placeholder:"请输入工序名称"},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"item.name"}})],1),t._v(" "),t.biaolist.length>0?s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工表面："}},[s("el-select",{staticClass:"margin10",attrs:{size:"mini",placeholder:"请选择表面类型"},model:{value:e.surfaceId,callback:function(s){t.$set(e,"surfaceId",s)},expression:"item.surfaceId"}},t._l(t.biaolist,function(t){return s("el-option",{key:t.surfaceId,attrs:{label:t.name,value:t.surfaceId}})}),1)],1):t._e(),t._v(" "),s("el-form-item",{staticClass:"work-date work-date-cont",attrs:{size:"small",label:"工序简图："}},[s("div",{staticClass:"picload-bg"},[s("a",{staticClass:"download-bg",attrs:{target:"_blank",href:t.downurls+e.processFile.path}},[s("img",{staticClass:"fl imgshow",attrs:{src:t.downurls+e.processFile.path,alt:""}})]),t._v(" "),s("div",{staticClass:"picload fl"},[s("div",{staticClass:"file-bg"},[s("a",{staticClass:"file"},[t._v("上传简图"),s("input",{staticClass:"upload",attrs:{"data-index":a,type:"file"},domProps:{value:t.filevalue},on:{change:t.add_img2}})])]),t._v(" "),s("p",{staticClass:"imgshowtishi"},[s("span",[t._v("*")]),t._v("只支持jpg和PNG格式图片，大小不超过5M")])])])]),t._v(" "),t._l(e.workingPositionList,function(i,n){return s("el-form",{key:n,staticClass:"form-in",staticStyle:{"margin-bottom":"10px",background:"#fff"},attrs:{"label-width":"85px"}},[s("h4",[s("span",{staticStyle:{color:"#333","font-size":"15px"}},[t._v("工位 "+t._s(n+1)+" ")]),t._v(" "),s("el-button",{staticClass:"del-button caobutton",attrs:{disabled:e.workingPositionList.length<2,size:"mini",type:"danger",plain:""},on:{click:function(e){return t.delcarts1(a,n)}}},[t._v("删除卡片")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.addafter1(a,n)}}},[t._v(" 后方插入 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{disabled:n+1==e.workingPositionList.length,type:"primary",size:"mini",plain:""},on:{click:function(e){return t.removeafter1(a,n)}}},[t._v(" 向后移动 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",disabled:0==n,size:"mini",plain:""},on:{click:function(e){return t.removefront1(a,n)}}},[t._v(" 向前移动 ")])],1),t._v(" "),t._l(i.workingStepList,function(e,r){return s("el-form",{key:r,staticClass:"form-in",staticStyle:{background:"#fcfcfc","margin-bottom":"10px",border:"1px dashed #ccc"},attrs:{"label-width":"85px"}},[s("h4",{staticStyle:{"border-bottom":"1px dashed #ccc"}},[s("span",{staticStyle:{color:"#666","font-size":"14px"}},[t._v("工步 "+t._s(r+1))]),t._v(" "),s("el-button",{staticClass:"del-button caobutton",attrs:{disabled:i.workingStepList.length<2,size:"mini",type:"danger",plain:""},on:{click:function(e){return t.delcarts2(a,n,r)}}},[t._v("删除卡片")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.addafter2(a,n,r)}}},[t._v(" 后方插入 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{disabled:r+1==i.workingStepList.length,type:"primary",size:"mini",plain:""},on:{click:function(e){return t.removeafter2(a,n,r)}}},[t._v(" 向后移动 ")]),t._v(" "),s("el-button",{staticClass:"caobutton",attrs:{type:"primary",disabled:0==r,size:"mini",plain:""},on:{click:function(e){return t.removefront2(a,n,r)}}},[t._v(" 向前移动 ")])],1),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("机床：")]),t._v(" "),s("el-select",{staticClass:"margin10",attrs:{size:"mini",placeholder:"请选择机床"},model:{value:e.tool,callback:function(s){t.$set(e,"tool",s)},expression:"item2.tool"}},t._l(t.jichuanglist,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("夹具或辅助工具：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.fixture,callback:function(s){t.$set(e,"fixture",s)},expression:"item2.fixture"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("刀具：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.cutter,callback:function(s){t.$set(e,"cutter",s)},expression:"item2.cutter"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("走刀深度（mm）：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.feedingDepth,callback:function(s){t.$set(e,"feedingDepth",s)},expression:"item2.feedingDepth"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("切削深度（mm）：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.cutDepth,callback:function(s){t.$set(e,"cutDepth",s)},expression:"item2.cutDepth"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("进给量（mm/r)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.load,callback:function(s){t.$set(e,"load",s)},expression:"item2.load"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("主轴转速（r/min)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.mainshaftSpeed,callback:function(s){t.$set(e,"mainshaftSpeed",s)},expression:"item2.mainshaftSpeed"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("切削速度（m/min)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.cutSpeed,callback:function(s){t.$set(e,"cutSpeed",s)},expression:"item2.cutSpeed"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden",position:"relative","padding-left":"120px","box-sizing":"border-box"}},[s("span",{staticStyle:{position:"absolute",top:"0",left:"0"}},[t._v("工时定额（min）：")]),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"33%","margin-right":"2%","padding-left":"80px"}},[s("span",{staticClass:"span"},[t._v("基本时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.basicTime,callback:function(s){t.$set(e,"basicTime",s)},expression:"item2.basicTime"}})],1),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"33%","margin-right":"2%","padding-left":"80px"}},[s("span",{staticClass:"span"},[t._v("辅助时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.assistTime,callback:function(s){t.$set(e,"assistTime",s)},expression:"item2.assistTime"}})],1),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"30%","padding-left":"120px"}},[s("span",{staticClass:"span"},[t._v("工作地服务时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",placeholder:"请输入内容"},model:{value:e.workspaceServiceTime,callback:function(s){t.$set(e,"workspaceServiceTime",s)},expression:"item2.workspaceServiceTime"}})],1)])])})],2)})],2)})],2):t._e(),t._v(" "),1==t.status||3==t.status?s("el-form-item",{attrs:{label:"工艺卡片："}},[s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",placeholder:"请输入内容",disabled:""},model:{value:t.partNumber,callback:function(e){t.partNumber=e},expression:"partNumber"}},[s("template",{slot:"prepend"},[t._v("零件号")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",disabled:"",placeholder:"请输入内容"},model:{value:t.materials,callback:function(e){t.materials=e},expression:"materials"}},[s("template",{slot:"prepend"},[t._v("材料")])],2)],1),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",disabled:"",placeholder:"请输入内容"},model:{value:t.partName,callback:function(e){t.partName=e},expression:"partName"}},[s("template",{slot:"prepend"},[t._v("零件名称")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",disabled:"",placeholder:"请输入内容"},model:{value:t.workblankWeight,callback:function(e){t.workblankWeight=e},expression:"workblankWeight"}},[s("template",{slot:"prepend"},[t._v("毛坯重量")])],2)],1),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("el-input",{staticClass:"fl",staticStyle:{width:"45%","margin-right":"9%"},attrs:{size:"small",placeholder:"请输入内容",disabled:""},model:{value:t.productType,callback:function(e){t.productType=e},expression:"productType"}},[s("template",{slot:"prepend"},[t._v("生产类型")])],2),t._v(" "),s("el-input",{staticClass:"fl",staticStyle:{width:"45%"},attrs:{size:"small",disabled:"",placeholder:"请输入内容"},model:{value:t.workblankKind,callback:function(e){t.workblankKind=e},expression:"workblankKind"}},[s("template",{slot:"prepend"},[t._v("毛坯种类")])],2)],1),t._v(" "),t._l(t.craftCardInfoDTOList,function(e,a){return s("el-form",{key:a,ref:"form",refInFor:!0,class:{"form-in":!0,overflow:e.close},attrs:{"label-width":"85px"}},[s("h4",[e.close?s("i",{staticClass:"iconstyle el-icon-plus",on:{click:function(e){return t.closetrue(a)}}}):t._e(),e.close?t._e():s("i",{staticClass:"iconstyle el-icon-minus",on:{click:function(e){return t.closefalse(a)}}}),s("span",{staticStyle:{color:"#000","font-size":"16px"}},[t._v("工序 "+t._s(a+1)+" ")])]),t._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"工序名称："}},[t._v("\n                        "+t._s(e.name)+"\n                      ")]),t._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工表面："}},[s("el-select",{staticClass:"margin10",attrs:{disabled:"",size:"mini",placeholder:"请选择表面类型"},model:{value:e.surfaceId,callback:function(s){t.$set(e,"surfaceId",s)},expression:"item.surfaceId"}},t._l(t.biaolist,function(t){return s("el-option",{key:t.surfaceId,attrs:{label:t.name,value:t.surfaceId}})}),1)],1),t._v(" "),s("el-form-item",{staticClass:"work-date work-date-cont",attrs:{size:"small",label:"工序简图："}},[s("div",{staticClass:"picload-bg"},[s("a",{staticClass:"download-bg",attrs:{target:"_blank",href:t.downurls+e.processFile.path}},[s("img",{staticClass:"fl imgshow",attrs:{src:t.downurls+e.processFile.path,alt:""}})])])]),t._v(" "),t._l(e.workingPositionList,function(e,a){return s("el-form",{key:a,staticClass:"form-in",staticStyle:{"margin-bottom":"10px",background:"#fff"},attrs:{"label-width":"85px"}},[s("h4",[s("span",{staticStyle:{color:"#333","font-size":"15px"}},[t._v("工位 "+t._s(a+1)+" ")])]),t._v(" "),t._l(e.workingStepList,function(e,a){return s("el-form",{key:a,staticClass:"form-in",staticStyle:{background:"#fcfcfc","margin-bottom":"10px",border:"1px dashed #ccc"},attrs:{"label-width":"85px"}},[s("h4",{staticStyle:{"border-bottom":"1px dashed #ccc"}},[s("span",{staticStyle:{color:"#666","font-size":"14px"}},[t._v("工步 "+t._s(a+1))])]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("机床：")]),t._v(" "),s("el-select",{staticClass:"margin10",attrs:{disabled:"",size:"mini",placeholder:"请选择机床"},model:{value:e.tool,callback:function(s){t.$set(e,"tool",s)},expression:"item2.tool"}},t._l(t.jichuanglist,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("夹具或辅助工具：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.fixture,callback:function(s){t.$set(e,"fixture",s)},expression:"item2.fixture"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("刀具：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.cutter,callback:function(s){t.$set(e,"cutter",s)},expression:"item2.cutter"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("走刀深度（mm）：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.feedingDepth,callback:function(s){t.$set(e,"feedingDepth",s)},expression:"item2.feedingDepth"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("切削深度（mm）：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.cutDepth,callback:function(s){t.$set(e,"cutDepth",s)},expression:"item2.cutDepth"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("进给量（mm/r)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.load,callback:function(s){t.$set(e,"load",s)},expression:"item2.load"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden"}},[s("div",{staticClass:"inp-bg",staticStyle:{"margin-right":"4%"}},[s("span",{staticClass:"span"},[t._v("主轴转速（r/min)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.mainshaftSpeed,callback:function(s){t.$set(e,"mainshaftSpeed",s)},expression:"item2.mainshaftSpeed"}})],1),t._v(" "),s("div",{staticClass:"inp-bg"},[s("span",{staticClass:"span"},[t._v("切削速度（m/min)：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.cutSpeed,callback:function(s){t.$set(e,"cutSpeed",s)},expression:"item2.cutSpeed"}})],1)]),t._v(" "),s("div",{staticClass:"demo-input-size",staticStyle:{"margin-top":"10px",overflow:"hidden",position:"relative","padding-left":"120px","box-sizing":"border-box"}},[s("span",{staticStyle:{position:"absolute",top:"0",left:"0"}},[t._v("工时定额（min）：")]),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"33%","margin-right":"2%","padding-left":"80px"}},[s("span",{staticClass:"span"},[t._v("基本时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.basicTime,callback:function(s){t.$set(e,"basicTime",s)},expression:"item2.basicTime"}})],1),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"33%","margin-right":"2%","padding-left":"80px"}},[s("span",{staticClass:"span"},[t._v("辅助时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.assistTime,callback:function(s){t.$set(e,"assistTime",s)},expression:"item2.assistTime"}})],1),t._v(" "),s("div",{staticClass:"inp-bg",staticStyle:{width:"30%","padding-left":"120px"}},[s("span",{staticClass:"span"},[t._v("工作地服务时间：")]),t._v(" "),s("el-input",{staticClass:"inp-cont",attrs:{size:"mini",disabled:"",placeholder:"请输入内容"},model:{value:e.workspaceServiceTime,callback:function(s){t.$set(e,"workspaceServiceTime",s)},expression:"item2.workspaceServiceTime"}})],1)])])})],2)})],2)})],2):t._e(),t._v(" "),s("el-form-item",{attrs:{label:"作业附件："}},[t._l(t.items.workFileDTOList,function(e,a){return[s("a",{staticClass:"download-bg",attrs:{target:"_blank",download:e.name||"图片",href:t.downurls+e.url}},[s("el-button",{staticClass:"download",attrs:{type:"text"}},[t._v(t._s(e.name))])],1),0==t.status||2==t.status?s("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"20px",color:"red",cursor:"pointer"},on:{click:function(s){return t.delworkFileDTO(e.id,a)}}}):t._e(),s("br")]}),t._v(" "),0==t.status||2==t.status?s("a",{staticClass:"file"},[t._v("上传附件"),s("input",{staticClass:"upload",attrs:{type:"file"},domProps:{value:t.filevalue},on:{change:t.add_img}})]):t._e()],2),t._v(" "),s("el-form-item",{attrs:{label:"作业讨论："}},[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"私信老师"}},[s("talkCmp",{attrs:{workMessageInfoDTOList:t.workMessageInfoDTOList,total:t.totalsi},on:{getmore:t.getmore,pus:t.Addmessagebystudent,dele:t.deletemessage}})],1),t._v(" "),s("el-tab-pane",{attrs:{label:"公共讨论区"}},[s("talkCmp",{attrs:{workMessageInfoDTOList:t.workMessageInfoDTOList2,total:t.totalsi2},on:{getmore:t.getmore2,pus:t.Addmessagebystudent2,dele:t.deletemessage2}})],1)],1)],1)],1):t._e()],1)]),t._v(" "),t.items?s("div",{staticClass:"savebg"},[s("div",{staticClass:"savein"},[0==t.status||2==t.status?[s("p",{staticClass:"fl"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.savework(0)}}},[t._v("保存")]),t._v(" "+t._s(t.tishi))],1),t._v(" "),s("p",{staticClass:"fr"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitwork}},[t._v("保存并提交")]),t._v(" 请于"+t._s(t.items.teaching.deadlineTime)+" 之前提交作业")],1)]:t._e(),t._v(" "),1==t.status?[s("p",{staticClass:"fr"},[s("el-alert",{attrs:{title:"作业已提交",closable:!1,effect:"dark",type:"success"}})],1)]:t._e(),t._v(" "),3==t.status?[s("p",{staticClass:"fr"},[s("el-alert",{attrs:{title:"作业已完成",closable:!1,effect:"dark",type:"success"}})],1)]:t._e()],2)]):t._e()])},staticRenderFns:[]};var d=s("VU/8")(c,p,!1,function(t){s("yafA"),s("B16S")},"data-v-5391d2a6",null);e.default=d.exports},yafA:function(t,e){}});
//# sourceMappingURL=12.00ac53bae36ed0b9a2f9.js.map