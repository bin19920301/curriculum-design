webpackJsonp([2],{"5zde":function(e,t,s){s("zQR9"),s("qyJz"),e.exports=s("FeBl").Array.from},Gu7T:function(e,t,s){"use strict";t.__esModule=!0;var r,a=s("c/Tr"),i=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return(0,i.default)(e)}},U1Hr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("Gu7T"),a=s.n(r),i=s("woOf"),n=s.n(i),l=s("Xxa5"),o=s.n(l),c=s("exGp"),u=s.n(c),d=s("mrNh"),p={name:"course",data:function(){return{loading:!1,projectId:"",choosed:"加工表面",biaolist:[],biaoptions:[{id:1,name:"平面"},{id:2,name:"外圆"},{id:3,name:"孔"}],editVisible:!1,newtype:"",newname:"",modifyItems:"",editVisible2:!1,ruleItems:[],ruleoptions:[{id:1,name:"加工优先级"},{id:2,name:"加工方法"}],editVisiblerule:!1,newruletype:"",newtext:"",editVisiblerule2:!1,modifyruleItem:""}},mounted:function(){var e=this.$route.params.id;this.projectId=e,this.Finishedsurface(),this.Listrules()},methods:{Listrules:function(){var e=this;return u()(o.a.mark(function t(){var s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(d._6)(e.projectId,1,50);case 4:0==(s=t.sent).status.code?e.ruleItems=s.result:e.$message.error(s.status.description),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,e,[[1,8,11,14]])}))()},newrule:function(){var e=this;return u()(o.a.mark(function t(){var s,r,a,i,n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.newtext,r=e.newruletype,a=e.projectId,r){t.next=4;break}return e.$message.error("类型不能为空"),t.abrupt("return");case 4:if(s){t.next=8;break}return e.$message.error("规则不能为空"),t.abrupt("return");case 8:return i=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=10,t.next=13,Object(d.i)(a,r,s);case 13:0==(n=t.sent).status.code?(e.$message({message:"添加成功",type:"success"}),e.editVisiblerule=!1,e.newtext="",e.newruletype="",e.Listrules()):e.$message({showClose:!0,duration:1e4,message:n.status.description,type:"error"}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:return t.prev=20,i.close(),t.finish(20);case 23:case"end":return t.stop()}},t,e,[[10,17,20,23]])}))()},delrule:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){t.Deleterule(e)}).catch(function(){})},Deleterule:function(e){var t=this;return u()(o.a.mark(function s(){var r,a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),s.prev=1,s.next=4,Object(d.y)(e);case 4:0==(a=s.sent).status.code?(t.$message({message:"删除成功",type:"success"}),t.Listrules()):t.$message.error(a.status.description),s.next=11;break;case 8:s.prev=8,s.t0=s.catch(1),console.log(s.t0);case 11:return s.prev=11,r.close(),s.finish(11);case 14:case"end":return s.stop()}},s,t,[[1,8,11,14]])}))()},editrule:function(e){this.editVisiblerule2=!0,this.modifyruleItem=n()({},e)},modifyrule:function(){var e=this;return u()(o.a.mark(function t(){var s,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.modifyruleItem,r=e.projectId,s.rulesType){t.next=4;break}return e.$message.error("类型不能为空"),t.abrupt("return");case 4:if(s.rulesDetails){t.next=8;break}return e.$message.error("规则不能为空"),t.abrupt("return");case 8:return a=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=10,t.next=13,Object(d._28)(s.id,r,s.rulesType,s.rulesDetails);case 13:0==(i=t.sent).status.code?(e.$message({message:"修改成功",type:"success"}),e.editVisiblerule2=!1,e.Listrules()):e.$message({showClose:!0,duration:1e4,message:i.status.description,type:"error"}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:return t.prev=20,a.close(),t.finish(20);case 23:case"end":return t.stop()}},t,e,[[10,17,20,23]])}))()},delbiao:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){t.Finishedsurfacedel(e)}).catch(function(){})},Finishedsurfacedel:function(e){var t=this;return u()(o.a.mark(function s(){var r,a,i;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.projectId,a=t.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),s.prev=2,s.next=5,Object(d.H)(r,e);case 5:0==(i=s.sent).status.code?(t.$message({message:"删除成功",type:"success"}),t.Finishedsurface()):t.$message.error(i.status.description),s.next=12;break;case 9:s.prev=9,s.t0=s.catch(2),console.log(s.t0);case 12:return s.prev=12,a.close(),s.finish(12);case 15:case"end":return s.stop()}},s,t,[[2,9,12,15]])}))()},sortId:function(e,t){return e.surfaceId-t.surfaceId},Finishedsurface:function(){var e=this;return u()(o.a.mark(function t(){var s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Object(d.F)(e.projectId);case 4:0==(s=t.sent).status.code?((r=s.result.list).sort(e.sortId),e.biaolist=r):e.$message.error(s.status.description),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.prev=11,e.loading=!1,t.finish(11);case 14:case"end":return t.stop()}},t,e,[[1,8,11,14]])}))()},editbiao:function(e){this.editVisible2=!0,this.modifyItems=n()({},e)},modifybiao:function(){var e=this;return u()(o.a.mark(function t(){var s,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.modifyItems,r=e.projectId,s.name){t.next=4;break}return e.$message.error("名称不能为空"),t.abrupt("return");case 4:if(s.type){t.next=8;break}return e.$message.error("类型不能为空"),t.abrupt("return");case 8:return a=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=10,t.next=13,Object(d.I)(r,s.surfaceId,s.type,s.name);case 13:0==(i=t.sent).status.code?(e.$message({message:"修改成功",type:"success"}),e.editVisible2=!1,e.Finishedsurface()):e.$message.error(i.status.description),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:return t.prev=20,a.close(),t.finish(20);case 23:case"end":return t.stop()}},t,e,[[10,17,20,23]])}))()},newbiao:function(){var e=this;return u()(o.a.mark(function t(){var s,r,i,n,l,c,u,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.newname,r=e.newtype,i=e.projectId,s){t.next=4;break}return e.$message.error("名称不能为空"),t.abrupt("return");case 4:if(r){t.next=8;break}return e.$message.error("类型不能为空"),t.abrupt("return");case 8:if(0!=e.biaolist.length){t.next=13;break}n=1,t.next=27;break;case 13:if(e.biaolist.length!=e.biaolist[e.biaolist.length-1].surfaceId){t.next=17;break}n=e.biaolist.length+1,t.next=27;break;case 17:l=e.biaolist.map(function(e){return e.surfaceId}),c=0;case 19:if(!(c<Math.max.apply(Math,a()(l)))){t.next=27;break}if(-1!=l.indexOf(c+1)){t.next=23;break}return n=c+1,t.abrupt("break",27);case 23:case 24:c++,t.next=19;break;case 27:return u=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=28,t.next=31,Object(d.G)(i,n,r,s);case 31:0==(p=t.sent).status.code?(e.$message({message:"添加成功",type:"success"}),e.editVisible=!1,e.newname="",e.newtype="",e.Finishedsurface()):e.$message.error(p.status.description),t.next=38;break;case 35:t.prev=35,t.t0=t.catch(28),console.log(t.t0);case 38:return t.prev=38,u.close(),t.finish(38);case 41:case"end":return t.stop()}},t,e,[[28,35,38,41]])}))()}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"crumbs",staticStyle:{"padding-left":"20px"}},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-s-operation"}),e._v(" 批阅逻辑\n            ")])],1)],1),e._v(" "),s("div",{staticClass:"container",staticStyle:{"border-bottom":"0"}},[s("div",{staticClass:"form"},[s("div",{staticClass:"form-top"},[s("el-radio-group",{attrs:{size:"small"},model:{value:e.choosed,callback:function(t){e.choosed=t},expression:"choosed"}},[s("el-radio-button",{attrs:{label:"加工表面"}}),e._v(" "),s("el-radio-button",{attrs:{label:"工序规则"}})],1),e._v(" "),"加工表面"==e.choosed?s("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:function(t){e.editVisible=!0,e.newname="",e.newtype=""}}},[e._v("新建表面")]):s("el-button",{staticClass:"fr",attrs:{type:"primary",size:"small"},on:{click:function(t){e.editVisiblerule=!0,e.newtext="",e.newruletype=""}}},[e._v("新建规则")])],1),e._v(" "),s("div",{staticClass:"cont"},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:"加工表面"==e.choosed,expression:"choosed=='加工表面'"}],staticClass:"onebg"},[s("el-table",{staticStyle:{width:"100%",border:"1px solid #f1f1f1","border-bottom":"0"},attrs:{data:e.biaolist}},[s("el-table-column",{attrs:{label:"表面ID",prop:"surfaceId",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.biaoptions[t.row.type-1].name)+"\n                      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"名称",prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.editbiao(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.delbiao(t.row.surfaceId)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"},{name:"show",rawName:"v-show",value:"工序规则"==e.choosed,expression:"choosed=='工序规则'"}],staticClass:"onebg"},[s("el-table",{staticStyle:{width:"100%",border:"1px solid #f1f1f1","border-bottom":"0"},attrs:{data:e.ruleItems}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"180"}}),e._v(" "),s("el-table-column",{attrs:{label:"规则"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(e.ruleoptions[t.row.rulesType-1].name)+"\n                      ")]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"规则内容",prop:"rulesDetails"}}),e._v(" "),s("el-table-column",{attrs:{width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini"},on:{click:function(s){return e.editrule(t.row)}}},[e._v("编辑")]),e._v(" "),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.delrule(t.row.id)}}},[e._v("删除")])]}}])})],1)],1)])])]),e._v(" "),s("el-dialog",{staticClass:"datas-bg",attrs:{title:"新建规则",visible:e.editVisiblerule,width:"380px"},on:{"update:visible":function(t){e.editVisiblerule=t}}},[s("el-select",{staticClass:"margin10",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择规则类型"},model:{value:e.newruletype,callback:function(t){e.newruletype=t},expression:"newruletype"}},e._l(e.ruleoptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),1==e.newruletype?s("p",{staticStyle:{color:"#999","font-size":"12px","margin-top":"4px"}},[s("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("请将加工表面ID的优先级按照加工优先级次序输入，同组ID以“,”间隔")]):e._e(),e._v(" "),2==e.newruletype?s("p",{staticStyle:{color:"#999","font-size":"12px","margin-top":"4px"}},[s("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("请以 表面ID-加工方法ID 的形式输入，不同规则以“;”间隔。加工方法ID：车削-a；铣削-b；刨-c；磨-d；钻-e；铰-f")]):e._e(),e._v(" "),s("el-input",{staticStyle:{margin:"10px 0 20px"},attrs:{size:"small",type:"textarea",placeholder:"请输入规则",rows:"5"},model:{value:e.newtext,callback:function(t){e.newtext=t},expression:"newtext"}}),e._v(" "),s("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:e.newrule}},[e._v("确 定")])],1),e._v(" "),s("el-dialog",{staticClass:"datas-bg",attrs:{title:"编辑规则",visible:e.editVisiblerule2,width:"380px"},on:{"update:visible":function(t){e.editVisiblerule2=t}}},[s("el-select",{staticClass:"margin10",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择规则类型"},model:{value:e.modifyruleItem.rulesType,callback:function(t){e.$set(e.modifyruleItem,"rulesType",t)},expression:"modifyruleItem.rulesType"}},e._l(e.ruleoptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),1==e.modifyruleItem.rulesType?s("p",{staticStyle:{color:"#999","font-size":"12px","margin-top":"4px"}},[s("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("请将加工表面ID的优先级按照加工优先级次序输入，同组ID以“,”间隔")]):e._e(),e._v(" "),2==e.modifyruleItem.rulesType?s("p",{staticStyle:{color:"#999","font-size":"12px","margin-top":"4px"}},[s("span",{staticStyle:{color:"red"}},[e._v("* ")]),e._v("请以 表面ID-加工方法ID 的形式输入，不同规则以“;”间隔。加工方法ID：车削-a；铣削-b；刨-c；磨-d；钻-e；铰-f")]):e._e(),e._v(" "),s("el-input",{staticStyle:{margin:"10px 0 20px"},attrs:{size:"small",type:"textarea",placeholder:"请输入规则",rows:"5"},model:{value:e.modifyruleItem.rulesDetails,callback:function(t){e.$set(e.modifyruleItem,"rulesDetails",t)},expression:"modifyruleItem.rulesDetails"}}),e._v(" "),s("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:e.modifyrule}},[e._v("确 定")])],1),e._v(" "),s("el-dialog",{staticClass:"datas-bg",attrs:{title:"新建表面",visible:e.editVisible,width:"380px"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-input",{staticClass:"margin10",attrs:{size:"small",placeholder:"请输入表面名称"},model:{value:e.newname,callback:function(t){e.newname=t},expression:"newname"}}),e._v(" "),s("el-select",{staticClass:"margin10",staticStyle:{margin:"10px 0 20px",width:"100%"},attrs:{size:"small",placeholder:"请选择表面类型"},model:{value:e.newtype,callback:function(t){e.newtype=t},expression:"newtype"}},e._l(e.biaoptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:e.newbiao}},[e._v("确 定")])],1),e._v(" "),s("el-dialog",{staticClass:"datas-bg",attrs:{title:"新建表面",visible:e.editVisible2,width:"380px"},on:{"update:visible":function(t){e.editVisible2=t}}},[s("el-input",{staticClass:"margin10",attrs:{size:"small",placeholder:"请输入表面名称"},model:{value:e.modifyItems.name,callback:function(t){e.$set(e.modifyItems,"name",t)},expression:"modifyItems.name"}}),e._v(" "),s("el-select",{staticClass:"margin10",staticStyle:{margin:"10px 0 20px",width:"100%"},attrs:{size:"small",placeholder:"请选择表面类型"},model:{value:e.modifyItems.type,callback:function(t){e.$set(e.modifyItems,"type",t)},expression:"modifyItems.type"}},e._l(e.biaoptions,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),s("el-button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary",size:"small"},on:{click:e.modifybiao}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var f=s("VU/8")(p,m,!1,function(e){s("wj5x"),s("coPt")},"data-v-5dd4005a",null);t.default=f.exports},"c/Tr":function(e,t,s){e.exports={default:s("5zde"),__esModule:!0}},coPt:function(e,t){},fBQ2:function(e,t,s){"use strict";var r=s("evD5"),a=s("X8DO");e.exports=function(e,t,s){t in e?r.f(e,t,a(0,s)):e[t]=s}},qyJz:function(e,t,s){"use strict";var r=s("+ZMJ"),a=s("kM2E"),i=s("sB3e"),n=s("msXi"),l=s("Mhyx"),o=s("QRG4"),c=s("fBQ2"),u=s("3fs2");a(a.S+a.F*!s("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,s,a,d,p=i(e),m="function"==typeof this?this:Array,f=arguments.length,b=f>1?arguments[1]:void 0,v=void 0!==b,y=0,h=u(p);if(v&&(b=r(b,f>2?arguments[2]:void 0,2)),void 0==h||m==Array&&l(h))for(s=new m(t=o(p.length));t>y;y++)c(s,y,v?b(p[y],y):p[y]);else for(d=h.call(p),s=new m;!(a=d.next()).done;y++)c(s,y,v?n(d,b,[a.value,y],!0):a.value);return s.length=y,s}})},wj5x:function(e,t){}});
//# sourceMappingURL=2.a81701ddfd6635991855.js.map