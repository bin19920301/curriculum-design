webpackJsonp([5],{"26Gb":function(e,t){},"8+FI":function(e,t,s){"use strict";var n=new(s("7+uW").default);t.a=n},Igip:function(e,t){},MpTN:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Xxa5"),a=s.n(n),i=s("exGp"),r=s.n(i),o=s("8+FI"),l=s("iPXC"),c=s("mrNh"),u={data:function(){return{editVisible:!1,password:"",newpassword:"",types:"",collapse:!1,fullscreen:!1,name:"未知",message:2}},computed:{username:function(){var e=l.a.getCookie("name");return e?unescape(e):this.name}},methods:{modifyPw:function(){1==this.types?this.tUpdatepassword():2==this.types&&this.aUpdatepassword()},tUpdatepassword:function(){var e=this;return r()(a.a.mark(function t(){var s,n,i,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.password,n=e.newpassword,s){t.next=4;break}return e.$message.error("旧密码不能为空"),t.abrupt("return");case 4:if(n){t.next=8;break}return e.$message.error("新密码不能为空"),t.abrupt("return");case 8:return i=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=10,t.next=13,Object(c._23)(s,n);case 13:0==(r=t.sent).status.code?e.$message({message:"密码修改成功",type:"success"}):e.$message.error(r.status.description),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:return t.prev=20,i.close(),t.finish(20);case 23:case"end":return t.stop()}},t,e,[[10,17,20,23]])}))()},aUpdatepassword:function(){var e=this;return r()(a.a.mark(function t(){var s,n,i,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.password,n=e.newpassword,s){t.next=4;break}return e.$message.error("旧密码不能为空"),t.abrupt("return");case 4:if(n){t.next=8;break}return e.$message.error("新密码不能为空"),t.abrupt("return");case 8:return i=e.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading"}),t.prev=10,t.next=13,Object(c._18)(s,n);case 13:0==(r=t.sent).status.code?e.$message({message:"密码修改成功",type:"success"}):e.$message.error(r.status.description),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),console.log(t.t0);case 20:return t.prev=20,i.close(),t.finish(20);case 23:case"end":return t.stop()}},t,e,[[10,17,20,23]])}))()},handleCommand:function(e){if("loginout"==e){var t=localStorage.getItem("type");l.a.delCookie(["studentToken","teacherToken","adminToken"][t]),l.a.delCookie("id"),l.a.delCookie("name");this.$router.push(["/login","/teacherlogin","/adminlogin"][t])}else"opens"==e&&(this.editVisible=!0)},collapseChage:function(){this.collapse=!this.collapse,o.a.$emit("collapse",this.collapse)},handleFullScreen:function(){var e=document.documentElement;this.fullscreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.fullscreen=!this.fullscreen}},mounted:function(){document.body.clientWidth<1300&&this.collapseChage(),this.types=localStorage.getItem("type")}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"collapse-btn",on:{click:e.collapseChage}},[e.collapse?n("i",{staticClass:"el-icon-s-unfold"}):n("i",{staticClass:"el-icon-s-fold"})]),e._v(" "),n("div",{staticClass:"logo"},[e._v("机械制造技术基础课程设计系统")]),e._v(" "),n("div",{staticClass:"header-right"},[n("div",{staticClass:"header-user-con"},[n("div",{staticClass:"btn-fullscreen",on:{click:e.handleFullScreen}},[n("el-tooltip",{attrs:{effect:"dark",content:e.fullscreen?"取消全屏":"全屏",placement:"bottom"}},[n("i",{staticClass:"el-icon-rank"})])],1),e._v(" "),n("div",{staticClass:"user-avator"},[0==e.types?n("img",{attrs:{src:s("/qp7")}}):e._e(),e._v(" "),1==e.types?n("img",{attrs:{src:s("h4W/")}}):e._e(),e._v(" "),2==e.types?n("img",{attrs:{src:s("h4W/")}}):e._e()]),e._v(" "),n("el-dropdown",{staticClass:"user-name",attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                    "+e._s(e.username)+"\n                    "),n("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[0!=e.types?n("el-dropdown-item",{attrs:{command:"opens"}},[e._v("修改密码")]):e._e(),e._v(" "),n("el-dropdown-item",{attrs:{divided:"",command:"loginout"}},[e._v("退出登录")])],1)],1)],1)]),e._v(" "),n("el-dialog",{staticClass:"datas-bg",attrs:{title:"修改密码",visible:e.editVisible,width:"380px"},on:{"update:visible":function(t){e.editVisible=t}}},[n("el-input",{staticClass:"margin10",attrs:{size:"small",placeholder:"请输入旧密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),n("el-input",{staticClass:"margin10",attrs:{size:"small",placeholder:"请输入新密码"},model:{value:e.newpassword,callback:function(t){e.newpassword=t},expression:"newpassword"}}),e._v(" "),n("el-button",{staticStyle:{display:"block",margin:"auto"},attrs:{type:"primary",size:"small"},on:{click:e.modifyPw}},[e._v("确 定")])],1)],1)},staticRenderFns:[]};var p={data:function(){return{num:0,collapse:!1,items:""}},mounted:function(){var e=localStorage.getItem("type");1==e?this.items=[{icon:"el-icon-c-scale-to-original",index:"course",title:"课程设计"},{icon:"el-icon-notebook-2",index:"works",title:"作业项目"},{icon:"el-icon-folder-opened",index:"datas",title:"基础资料"},{icon:"el-icon-folder-opened",index:"talk",title:"教师讨论区"},{icon:"el-icon-message",index:"message",title:"消息中心"}]:0==e?this.items=[{icon:"el-icon-c-scale-to-original",index:"stucourse",title:"课程设计"},{icon:"el-icon-message",index:"stumessage",title:"消息中心"}]:2==e&&(this.items=[{icon:"el-icon-s-check",index:"stumanage",title:"学生管理"},{icon:"el-icon-s-custom",index:"teachermanage",title:"教师管理"},{icon:"el-icon-s-opportunity",index:"admin",title:"管理员管理"},{icon:"el-icon-s-operation",index:"schoolmanage",title:"学校组织管理"}]),0==e?this.Countstudentunreadmessage():1==e&&this.Countteacherunreadmessage()},computed:{onRoutes:function(){return this.$route.path.replace("/","")}},methods:{getnum:function(){var e=localStorage.getItem("type");0==e?this.Countstudentunreadmessage():1==e&&this.Countteacherunreadmessage()},Countstudentunreadmessage:function(){var e=this;return r()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.id,t.prev=2,t.next=5,Object(c.p)();case 5:0==(s=t.sent).status.code?e.num=s.result.total:e.$message.error(s.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()},Countteacherunreadmessage:function(){var e=this;return r()(a.a.mark(function t(){var s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,e.id,t.prev=2,t.next=5,Object(c.q)();case 5:0==(s=t.sent).status.code?e.num=s.result.total:e.$message.error(s.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()}},created:function(){var e=this;o.a.$on("collapse",function(t){e.collapse=t,o.a.$emit("collapse-content",t)});localStorage.getItem("type")}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sidebar"},[s("el-menu",{staticClass:"sidebar-el-menu",attrs:{"default-active":e.onRoutes,collapse:e.collapse,"background-color":"#324157","text-color":"#bfcbd9","active-text-color":"#20a0ff","unique-opened":"",router:""}},[e._l(e.items,function(t){return[t.subs?[s("el-submenu",{key:t.index,attrs:{index:t.index}},[s("template",{slot:"title"},[s("i",{class:t.icon}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._v(" "),e._l(t.subs,function(t){return[t.subs?s("el-submenu",{key:t.index,attrs:{index:t.index}},[s("template",{slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.subs,function(t,n){return s("el-menu-item",{key:n,attrs:{index:t.index}},[e._v(e._s(t.title))])})],2):s("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v(e._s(t.title))])]})],2)]:[s("el-menu-item",{key:t.index,attrs:{index:t.index},on:{click:e.getnum}},[s("i",{class:t.icon}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title)+" "),"消息中心"==t.title&&e.num>0?s("span",{staticClass:"dian"},[e._v(e._s(e.num))]):e._e()])])]]})],2)],1)},staticRenderFns:[]};var h={data:function(){return{tagsList:[]}},methods:{isActive:function(e){return e===this.$route.fullPath},closeTags:function(e){var t=this.tagsList.splice(e,1)[0],s=this.tagsList[e]?this.tagsList[e]:this.tagsList[e-1];s?t.path===this.$route.fullPath&&this.$router.push(s.path):this.$router.push("/")},closeAll:function(){this.tagsList=[],this.$router.push("/")},closeOther:function(){var e=this,t=this.tagsList.filter(function(t){return t.path===e.$route.fullPath});this.tagsList=t},setTags:function(e){this.tagsList.some(function(t){return t.path===e.fullPath})||(this.tagsList.length>=8&&this.tagsList.shift(),this.tagsList.push({title:e.meta.title,path:e.fullPath,name:e.matched[1].components.default.name})),o.a.$emit("tags",this.tagsList)},handleTags:function(e){"other"===e?this.closeOther():this.closeAll()}},computed:{showTags:function(){return this.tagsList.length>0}},watch:{$route:function(e,t){this.setTags(e)}},created:function(){var e=this;this.setTags(this.$route),o.a.$on("close_current_tags",function(){for(var t=0,s=e.tagsList.length;t<s;t++){if(e.tagsList[t].path===e.$route.fullPath){t<s-1?e.$router.push(e.tagsList[t+1].path):t>0?e.$router.push(e.tagsList[t-1].path):e.$router.push("/"),e.tagsList.splice(t,1);break}}})}},g={render:function(){var e=this;e.$createElement;e._self._c;return e._e()},staticRenderFns:[]};var f={data:function(){return{tagsList:[],collapse:!1}},components:{vHead:s("VU/8")(u,d,!1,function(e){s("XRWm")},"data-v-0edf9fed",null).exports,vSidebar:s("VU/8")(p,m,!1,function(e){s("Igip")},"data-v-deef2782",null).exports,vTags:s("VU/8")(h,g,!1,function(e){s("26Gb")},null,null).exports},created:function(){var e=this;o.a.$on("collapse-content",function(t){e.collapse=t}),o.a.$on("tags",function(t){for(var s=[],n=0,a=t.length;n<a;n++)t[n].name&&s.push(t[n].name);e.tagsList=s})}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("v-head"),this._v(" "),t("v-sidebar"),this._v(" "),t("div",{staticClass:"content-box",class:{"content-collapse":this.collapse}},[t("v-tags"),this._v(" "),t("div",{staticClass:"content"},[t("transition",{attrs:{name:"move",mode:"out-in"}},[t("keep-alive",{attrs:{include:this.tagsList}},[t("router-view")],1)],1),this._v(" "),t("el-backtop",{attrs:{target:".content"}})],1)],1)],1)},staticRenderFns:[]},_=s("VU/8")(f,v,!1,null,null,null);t.default=_.exports},XRWm:function(e,t){}});
//# sourceMappingURL=5.e98fbde103964454e8fb.js.map