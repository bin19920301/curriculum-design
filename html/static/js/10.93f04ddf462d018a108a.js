webpackJsonp([10],{JASZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),i=s("exGp"),n=s.n(i),o=s("mrNh"),l={name:"course",data:function(){return{loading:!1,status:0,id:"",items:"",craftCardInfoDTOList:[],workMessageInfoDTOList:[],editVisible:!1,talktext:"",score:""}},mounted:function(){var e=this.$route.params.id;this.id=e,this.Getworkinfobyid()},methods:{handleDelete:function(){var e=this;this.$confirm("确定要退回吗？","提示",{type:"warning"}).then(function(){e.Return()}).catch(function(){})},deletemessage:function(e,t){var s=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){s.Deleteteahcermessage(e,t)}).catch(function(){})},Deleteteahcermessage:function(e,t){var s=this;return n()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.loading=!0,a.prev=1,a.next=4,Object(o.x)(e);case 4:0==(i=a.sent).status.code?(s.$message({showClose:!0,message:"删除成功",type:"success"}),s.workMessageInfoDTOList.splice(t,1)):s.$message.error(i.status.description),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,s.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,s,[[1,8,11,14]])}))()},Score:function(){var e=this;return n()(r.a.mark(function t(){var s,a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.id,a=e.score){t.next=4;break}return e.$message({showClose:!0,message:"请输入评分",type:"warning"}),t.abrupt("return");case 4:return e.loading=!0,t.prev=6,t.next=9,Object(o._2)(s,a);case 9:0==(i=t.sent).status.code?(e.$message({showClose:!0,message:"评分成功",type:"success"}),e.editVisible=!1,e.Getworkinfobyid()):e.$message.error(i.status.description),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,e,[[6,13,16,19]])}))()},Return:function(){var e=this;return n()(r.a.mark(function t(){var s,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,s=e.id,t.prev=2,t.next=5,Object(o._1)(s);case 5:0==(a=t.sent).status.code?(e.$message({showClose:!0,message:"退回成功",type:"success"}),e.Getworkinfobyid()):e.$message.error(a.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()},Addmessagebyteacher:function(){var e=this;return n()(r.a.mark(function t(){var s,a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.id,a=e.talktext){t.next=4;break}return e.$message({showClose:!0,message:"讨论内容不能为空",type:"warning"}),t.abrupt("return");case 4:return e.loading=!0,t.prev=6,t.next=9,Object(o.h)(s,a);case 9:0==(i=t.sent).status.code?(e.$message({showClose:!0,message:"发表成功",type:"success"}),e.talktext="",e.Getworkinfobyid()):e.$message.error(i.status.description),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,e,[[6,13,16,19]])}))()},Getworkinfobyid:function(){var e=this;return n()(r.a.mark(function t(){var s,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,s=e.id,t.prev=2,t.next=5,Object(o.O)(s);case 5:0==(a=t.sent).status.code?(e.items=a.result,e.status=a.result.status,e.workMessageInfoDTOList=a.result.workMessageInfoDTOList,e.craftCardInfoDTOList=e.$sortBykey(a.result.craftCardInfoDTOList,"sort")):e.$message.error(a.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"stuworkdetail"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 课程设计\n            ")]),e._v(" "),a("el-breadcrumb-item",[e._v(e._s(e.items.teaching.name))])],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[1==e.status?a("div",{staticClass:"modify-button"},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleDelete}},[e._v("退回")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.editVisible=!0}}},[e._v("评分")])],1):e._e(),e._v(" "),3==e.status?a("div",{staticClass:"suc"},[a("el-alert",{attrs:{title:"作业已完成",closable:!1,effect:"dark",type:"success"}})],1):e._e(),e._v(" "),2==e.status?a("div",{staticClass:"suc"},[a("el-alert",{attrs:{title:"作业已退回",closable:!1,effect:"dark",type:"error"}})],1):e._e(),e._v(" "),a("div",{staticClass:"form"},[a("h3",[e._v(e._s(e.items.teaching.name))]),e._v(" "),a("el-form",{attrs:{"label-width":"90px"}},[a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"指导老师："}},[e._v("\n                    "+e._s(e.items.teaching.teacherName)+"\n                ")]),e._v(" "),a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"学生："}},[e._v("\n                    "+e._s(e.items.studentName)+"\n                ")]),e._v(" "),a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"作业项目："}},[e._v("\n                    "+e._s(e.items.workProjectInfoDTO.name)+"\n                ")]),e._v(" "),a("el-form-item",{attrs:{label:"项目简介："}},[a("div",{staticClass:"teacherishi"},[e._v(e._s(e.items.workProjectInfoDTO.desc))])]),e._v(" "),a("el-form-item",{attrs:{label:"相关资料："}},[e._l(e.items.workProjectInfoDTO.filelist,function(t){return[a("a",{staticClass:"download-bg",attrs:{href:""}},[a("el-button",{staticClass:"download",attrs:{type:"text"}},[e._v(e._s(t.name))]),e._v(" "),a("i",{staticClass:"el-icon-download"})],1),a("br")]})],2),e._v(" "),a("el-form-item",{attrs:{label:"工艺卡片："}},e._l(e.craftCardInfoDTOList,function(t){return a("el-form",{ref:"form",refInFor:!0,staticClass:"form-in",attrs:{"label-width":"85px"}},[a("h4",[e._v("工序"+e._s(t.sort+1))]),e._v(" "),a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工表面："}},[e._v("\n                          "+e._s(t.surfaceName)+"\n                      ")]),e._v(" "),a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工形式："}},[e._v("\n                          "+e._s(t.processingMethodName)+"\n                      ")]),e._v(" "),a("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"工序内容："}},[a("div",{staticClass:"teacherishi"},[e._v(e._s(t.processContent))])])],1)}),1),e._v(" "),a("el-form-item",{attrs:{label:"作业讨论："}},[e._l(e.workMessageInfoDTOList,function(t,r){return a("div",{staticClass:"talk-bg"},[a("div",{staticClass:"talk"},[a("div",{staticClass:"fl pic"},[1==t.senderType?a("img",{attrs:{src:s("/qp7"),alt:""}}):e._e(),e._v(" "),a("img",{attrs:{"v:else":"",src:s("h4W/"),alt:""}})]),e._v(" "),a("p",{staticClass:"fl"},[e._v(e._s(t.senderName)+"   "+e._s(t.createtime))])]),e._v(" "),a("p",{class:[1==t.senderType?"text self":"text self green"]},[e._v(e._s(t.content)),2==t.senderType?a("i",{staticClass:"el-icon-close deldiscuss",on:{click:function(s){return e.deletemessage(t.id,r)}}}):e._e()])])}),e._v(" "),a("el-input",{staticClass:"push-talk",attrs:{type:"textarea",placeholder:"请输入内容",size:"small",rows:"4",maxlength:"300","show-word-limit":""},model:{value:e.talktext,callback:function(t){e.talktext=t},expression:"talktext"}}),e._v(" "),a("p",{staticClass:"push-button"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.Addmessagebyteacher}},[e._v("发表")])],1)],2)],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"评分",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-width":"70px"}},[a("el-form-item",{attrs:{label:"评分："}},[a("el-input",{attrs:{size:"small",onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');",maxlength:"3"},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.Score}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=s("VU/8")(l,c,!1,function(e){s("nq8H"),s("yVd7")},"data-v-71299fc0",null);t.default=u.exports},nq8H:function(e,t){},yVd7:function(e,t){}});
//# sourceMappingURL=10.93f04ddf462d018a108a.js.map