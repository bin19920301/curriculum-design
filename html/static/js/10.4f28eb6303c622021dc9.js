webpackJsonp([10],{JASZ:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Xxa5"),r=s.n(a),n=s("exGp"),i=s.n(n),o=s("mrNh"),l=s("eOoE"),c={name:"course",components:{talkCmp:s("wNu5").a},data:function(){return{loading:!1,status:0,id:"",items:"",craftCardInfoDTOList:[],workMessageInfoDTOList:[],editVisible:!1,talktext:"",score:"",downurls:"",totalsi:0,startId:0}},mounted:function(){this.downurls=l.a;var e=this.$route.params.id;this.id=e,this.Getworkinfobyid(),this.Teacherlistmessage(1)},methods:{handleDelete:function(){var e=this;this.$confirm("确定要退回吗？","提示",{type:"warning"}).then(function(){e.Return()}).catch(function(){})},deletemessage:function(e){var t=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then(function(){t.Deleteteahcermessage(e.id,e.index)}).catch(function(){})},Deleteteahcermessage:function(e,t){var s=this;return i()(r.a.mark(function a(){var n;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s.loading=!0,a.prev=1,a.next=4,Object(o.A)(e);case 4:0==(n=a.sent).status.code?(s.$message({showClose:!0,message:"删除成功",type:"success"}),s.workMessageInfoDTOList.splice(t,1)):s.$message.error(n.status.description),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.log(a.t0);case 11:return a.prev=11,s.loading=!1,a.finish(11);case 14:case"end":return a.stop()}},a,s,[[1,8,11,14]])}))()},Score:function(){var e=this;return i()(r.a.mark(function t(){var s,a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.id,a=e.score){t.next=4;break}return e.$message({showClose:!0,message:"请输入评分",type:"warning"}),t.abrupt("return");case 4:return e.loading=!0,t.prev=6,t.next=9,Object(o._4)(s,a);case 9:0==(n=t.sent).status.code?(e.$message({showClose:!0,message:"评分成功",type:"success"}),e.editVisible=!1,e.Getworkinfobyid()):e.$message.error(n.status.description),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,e,[[6,13,16,19]])}))()},Return:function(){var e=this;return i()(r.a.mark(function t(){var s,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,s=e.id,t.prev=2,t.next=5,Object(o._3)(s);case 5:0==(a=t.sent).status.code?(e.$message({showClose:!0,message:"退回成功",type:"success"}),e.Getworkinfobyid()):e.$message.error(a.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()},Addmessagebyteacher:function(e){var t=this;return i()(r.a.mark(function s(){var a,n;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=t.id,e){s.next=4;break}return t.$message({showClose:!0,message:"讨论内容不能为空",type:"warning"}),s.abrupt("return");case 4:return t.loading=!0,s.prev=6,s.next=9,Object(o.h)(a,e);case 9:0==(n=s.sent).status.code?(t.$message({showClose:!0,message:"发表成功",type:"success"}),t.talktext="",t.Teacherlistmessage(1)):t.$message.error(n.status.description),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(6),console.log(s.t0);case 16:return s.prev=16,t.loading=!1,s.finish(16);case 19:case"end":return s.stop()}},s,t,[[6,13,16,19]])}))()},Getworkinfobyid:function(){var e=this;return i()(r.a.mark(function t(){var s,a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,s=e.id,t.prev=2,t.next=5,Object(o.Q)(s);case 5:0==(a=t.sent).status.code?(e.items=a.result,e.status=a.result.status,e.craftCardInfoDTOList=e.$sortBykey(a.result.craftCardInfoDTOList,"sort")):e.$message.error(a.status.description),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:return t.prev=12,e.loading=!1,t.finish(12);case 15:case"end":return t.stop()}},t,e,[[2,9,12,15]])}))()},getmore:function(e){this.Teacherlistmessage(e)},Teacherlistmessage:function(e){var t=this;return i()(r.a.mark(function s(){var a;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return 10,1==e&&(t.workMessageInfoDTOList=[],t.startId=0,5),s.prev=3,s.next=6,Object(o._10)(t.id,e,5,t.startId);case 6:0==(a=s.sent).status.code?(1==e&&(t.startId=a.result.list[0].id),t.totalsi=a.result.total,t.workMessageInfoDTOList=a.result.list.reverse().concat(t.workMessageInfoDTOList)):t.$message.error(a.status.description),s.next=13;break;case 10:s.prev=10,s.t0=s.catch(3),console.log(s.t0);case 13:return s.prev=13,s.finish(13);case 15:case"end":return s.stop()}},s,t,[[3,10,13,15]])}))()}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"stuworkdetail"},[s("div",{staticClass:"crumbs"},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("i",{staticClass:"el-icon-lx-calendar"}),e._v(" 课程设计\n            ")]),e._v(" "),e.items?s("el-breadcrumb-item",[e._v(e._s(e.items.teaching.name))]):e._e()],1)],1),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container"},[1==e.status?s("div",{staticClass:"modify-button"},[s("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleDelete}},[e._v("退回")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.editVisible=!0}}},[e._v("评分")])],1):e._e(),e._v(" "),3==e.status?s("div",{staticClass:"suc"},[s("el-alert",{attrs:{title:"作业已完成",closable:!1,effect:"dark",type:"success"}})],1):e._e(),e._v(" "),2==e.status?s("div",{staticClass:"suc"},[s("el-alert",{attrs:{title:"作业已退回",closable:!1,effect:"dark",type:"error"}})],1):e._e(),e._v(" "),e.items?s("div",{staticClass:"form"},[s("h3",[e._v(e._s(e.items.teaching.name))]),e._v(" "),s("el-form",{attrs:{"label-width":"90px"}},[s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"指导老师："}},[e._v("\n                    "+e._s(e.items.teaching.teacherName)+"\n                ")]),e._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"学生："}},[e._v("\n                    "+e._s(e.items.studentName)+"\n                ")]),e._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"作业项目："}},[e._v("\n                    "+e._s(e.items.workProjectInfoDTO.name)+"\n                ")]),e._v(" "),s("el-form-item",{attrs:{label:"项目简介："}},[s("div",{staticClass:"teacherishi"},[e._v(e._s(e.items.workProjectInfoDTO.desc))])]),e._v(" "),s("el-form-item",{attrs:{label:"相关资料："}},[e._l(e.items.workProjectInfoDTO.filelist,function(t){return 1==t.fileType?[s("a",{staticClass:"download-bg",attrs:{target:"_blank",href:e.downurls+t.url}},[s("el-button",{staticClass:"download",attrs:{type:"text"}},[e._v(e._s(t.name))]),e._v(" "),s("i",{staticClass:"el-icon-download"})],1),s("br")]:e._e()})],2),e._v(" "),s("el-form-item",{attrs:{label:"参考答案："}},[e._l(e.items.workProjectInfoDTO.filelist,function(t){return 2==t.fileType?[s("a",{staticClass:"download-bg",attrs:{target:"_blank",href:e.downurls+t.url}},[s("el-button",{staticClass:"download",attrs:{type:"text"}},[e._v(e._s(t.name))]),e._v(" "),s("i",{staticClass:"el-icon-download"})],1),s("br")]:e._e()})],2),e._v(" "),s("el-form-item",{attrs:{label:"工艺卡片："}},e._l(e.craftCardInfoDTOList,function(t,a){return s("el-form",{key:a,ref:"form",refInFor:!0,staticClass:"form-in",attrs:{"label-width":"85px"}},[s("h4",[e._v("工序"+e._s(t.sort+1))]),e._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工表面："}},[e._v("\n                          "+e._s(t.surfaceName)+"\n                      ")]),e._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"加工形式："}},[e._v("\n                          "+e._s(t.processingMethodName)+"\n                      ")]),e._v(" "),s("el-form-item",{staticClass:"work-date",attrs:{size:"small",label:"工序内容："}},[s("div",{staticClass:"teacherishi"},[e._v(e._s(t.processContent))])])],1)}),1),e._v(" "),s("el-form-item",{attrs:{label:"作业附件："}},[e._l(e.items.workFileDTOList,function(t){return[s("a",{staticClass:"download-bg",attrs:{target:"_blank",href:e.downurls+t.url}},[s("el-button",{staticClass:"download",attrs:{type:"text"}},[e._v(e._s(t.name))]),e._v(" "),s("i",{staticClass:"el-icon-download"})],1),s("br")]})],2),e._v(" "),s("el-form-item",{attrs:{label:"作业讨论："}},[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"私信老师"}},[s("talkCmp",{attrs:{workMessageInfoDTOList:e.workMessageInfoDTOList,total:e.totalsi},on:{getmore:e.getmore,pus:e.Addmessagebyteacher,dele:e.deletemessage}})],1)],1)],1)],1)],1):e._e()]),e._v(" "),s("el-dialog",{attrs:{title:"评分",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[s("el-form",{ref:"form",attrs:{"label-width":"70px"}},[s("el-form-item",{attrs:{label:"评分："}},[s("el-input",{attrs:{size:"small",onkeyup:"this.value=this.value.replace(/[^\\d.]/g,'');",maxlength:"3"},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1)],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{size:"small"},on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.Score}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var d=s("VU/8")(c,u,!1,function(e){s("OAAk"),s("bj5K")},"data-v-431dfd9e",null);t.default=d.exports},OAAk:function(e,t){},bj5K:function(e,t){}});
//# sourceMappingURL=10.4f28eb6303c622021dc9.js.map